### 1 создать GCE инстанс типа e2-medium и диском 10GB
> Виртуальная машина создана в yandex.cloud

### 2 установить на него PostgreSQL 14 с дефолтными настройками
<pre><code>sudo apt update && sudo apt upgrade -y && sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list' && wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add - && sudo apt-get update && sudo apt-get -y install postgresql-14</code></pre>

### 3 применить параметры настройки PostgreSQL из прикрепленного к материалам занятия файла
> Добавляем настройки в конец файла postgresql.conf поскольку применяются последние записанные строки с параметрами
<pre><code>max_connections = 40
shared_buffers = 1GB
effective_cache_size = 3GB
maintenance_work_mem = 512MB
checkpoint_completion_target = 0.9
wal_buffers = 16MB
default_statistics_target = 500
random_page_cost = 4
effective_io_concurrency = 2
work_mem = 6553kB
min_wal_size = 4GB
max_wal_size = 16GB</code></pre>
> Перезапускаем службу: sudo systemctl restart postgresql
### выполнить pgbench -i postgres
> sudo -u postgres pgbench -i postgres
### запустить pgbench -c8 -P 60 -T 600 -U postgres postgres
> sudo -u postgres pgbench -c8 -P 60 -T 3600 -U postgres  > stat.txt
### дать отработать до конца
<pre><code>starting vacuum...end.
progress: 60.0 s, 495.0 tps, lat 16.153 ms stddev 13.756
progress: 120.0 s, 479.3 tps, lat 16.692 ms stddev 12.837
progress: 180.0 s, 539.8 tps, lat 14.817 ms stddev 11.030
progress: 240.0 s, 507.5 tps, lat 15.764 ms stddev 12.808
progress: 300.0 s, 586.8 tps, lat 13.634 ms stddev 9.960
progress: 360.0 s, 574.6 tps, lat 13.923 ms stddev 10.388
progress: 420.0 s, 494.8 tps, lat 16.167 ms stddev 13.132
progress: 480.0 s, 443.3 tps, lat 18.041 ms stddev 17.044
progress: 540.0 s, 415.0 tps, lat 19.277 ms stddev 15.718
progress: 600.0 s, 477.7 tps, lat 16.748 ms stddev 12.425
progress: 660.0 s, 511.7 tps, lat 15.636 ms stddev 11.967
progress: 720.0 s, 530.4 tps, lat 15.081 ms stddev 11.463
progress: 780.0 s, 503.3 tps, lat 15.891 ms stddev 12.234
progress: 840.0 s, 560.2 tps, lat 14.283 ms stddev 9.348
progress: 900.0 s, 518.6 tps, lat 15.428 ms stddev 10.590
progress: 960.0 s, 406.8 tps, lat 19.662 ms stddev 14.848
progress: 1020.0 s, 368.4 tps, lat 21.721 ms stddev 16.133
progress: 1080.0 s, 501.2 tps, lat 15.962 ms stddev 13.548
progress: 1140.0 s, 525.0 tps, lat 15.235 ms stddev 11.090
progress: 1200.0 s, 540.7 tps, lat 14.798 ms stddev 11.250
progress: 1260.0 s, 527.7 tps, lat 15.159 ms stddev 11.342
progress: 1320.0 s, 474.5 tps, lat 16.859 ms stddev 13.021
progress: 1380.0 s, 507.1 tps, lat 15.774 ms stddev 11.291
progress: 1440.0 s, 586.0 tps, lat 13.654 ms stddev 8.917
progress: 1500.0 s, 600.8 tps, lat 13.314 ms stddev 8.191
progress: 1560.0 s, 342.1 tps, lat 23.375 ms stddev 17.286
progress: 1620.0 s, 513.3 tps, lat 15.590 ms stddev 11.838
progress: 1680.0 s, 540.1 tps, lat 14.811 ms stddev 10.072
progress: 1740.0 s, 586.4 tps, lat 13.641 ms stddev 9.474
progress: 1800.0 s, 567.3 tps, lat 14.102 ms stddev 9.630
progress: 1860.0 s, 531.1 tps, lat 15.063 ms stddev 11.195
progress: 1920.0 s, 515.2 tps, lat 15.524 ms stddev 11.442
progress: 1980.0 s, 535.5 tps, lat 14.942 ms stddev 10.318
progress: 2040.0 s, 458.5 tps, lat 17.442 ms stddev 14.983
progress: 2100.0 s, 454.8 tps, lat 17.595 ms stddev 14.252
progress: 2160.0 s, 524.8 tps, lat 15.242 ms stddev 10.973
progress: 2220.0 s, 480.7 tps, lat 16.642 ms stddev 12.111
progress: 2280.0 s, 459.0 tps, lat 17.428 ms stddev 14.323
progress: 2340.0 s, 421.2 tps, lat 18.996 ms stddev 13.948
progress: 2400.0 s, 610.1 tps, lat 13.113 ms stddev 8.224
progress: 2460.0 s, 539.8 tps, lat 14.818 ms stddev 11.156
progress: 2520.0 s, 519.1 tps, lat 15.410 ms stddev 11.087
progress: 2580.0 s, 461.1 tps, lat 17.349 ms stddev 13.371
progress: 2640.0 s, 523.5 tps, lat 15.282 ms stddev 12.097
progress: 2700.0 s, 565.7 tps, lat 14.140 ms stddev 9.282
progress: 2760.0 s, 557.7 tps, lat 14.345 ms stddev 10.268
progress: 2820.0 s, 513.1 tps, lat 15.589 ms stddev 10.746
progress: 2880.0 s, 568.7 tps, lat 14.065 ms stddev 9.519
progress: 2940.0 s, 596.6 tps, lat 13.413 ms stddev 8.742
progress: 3000.0 s, 542.0 tps, lat 14.760 ms stddev 11.049
progress: 3060.0 s, 633.5 tps, lat 12.628 ms stddev 7.805
progress: 3120.0 s, 490.4 tps, lat 16.313 ms stddev 12.223
progress: 3180.0 s, 533.8 tps, lat 14.982 ms stddev 10.877
progress: 3240.0 s, 583.4 tps, lat 13.714 ms stddev 9.682
progress: 3300.0 s, 537.6 tps, lat 14.882 ms stddev 11.352
progress: 3360.0 s, 515.8 tps, lat 15.505 ms stddev 12.082
progress: 3420.0 s, 532.9 tps, lat 15.014 ms stddev 10.636
progress: 3480.0 s, 533.2 tps, lat 15.004 ms stddev 10.873
progress: 3540.0 s, 558.6 tps, lat 14.312 ms stddev 10.206
progress: 3600.0 s, 586.8 tps, lat 13.639 ms stddev 9.317</code></pre>
### дальше настроить autovacuum максимально эффективно

### построить график по получившимся значениям
### так чтобы получить максимально ровное значение tps